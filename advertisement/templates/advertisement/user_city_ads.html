{% extends 'shop/base.html' %}
{% load humanize %}
{% load i18n %}


{% block left-column %}
<div class="col-2 bg-light fixed-top d-none d-xl-block" style="position:fixed; height:100%;overflow-y:auto">

    <center class="card bg-light col-12">

        <h6 class="text-dark py-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
        </svg>
            <p>Pockect store logo</p>
        </h6>

        <h6 class="text-dark py-2">
            {% if request.user.is_authenticated %}

            <a class="text-dark" href="{% url 'public_post:user_city_posts' %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-tags-fill" viewBox="0 0 16 16">
                  <path d="M2 2a1 1 0 0 1 1-1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 2 6.586V2zm3.5 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                  <path d="M1.293 7.793A1 1 0 0 1 1 7.086V2a1 1 0 0 0-1 1v4.586a1 1 0 0 0 .293.707l7 7a1 1 0 0 0 1.414 0l.043-.043-7.457-7.457z"/>
                </svg>
                <p> {% trans "Posts" %} </p>
            </a>

            {% else %}

            <a class="text-dark" href="{% url 'public_post:all_public_post_query' %}">
            {% trans "Posts" %}
            </a>

            {% endif %}

        </h6>

        {% if request.user.is_authenticated %}
        <h6 class="text-dark py-2">
            <a class="text-dark"  href="{% url 'show-notifications' %}">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-bell-fill" viewBox="0 0 16 16">
              <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"/>
            </svg>
            <p>{% trans "Notifications" %}</p>
            </a>
        </h6>
        {% endif %}


        <h6 class="text-dark py-2">
            <a class="text-dark"  href="{% url 'announcements:ads_user_city' user.id %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-megaphone" viewBox="0 0 16 16">
                  <path d="M13 2.5a1.5 1.5 0 0 1 3 0v11a1.5 1.5 0 0 1-3 0v-.214c-2.162-1.241-4.49-1.843-6.912-2.083l.405 2.712A1 1 0 0 1 5.51 15.1h-.548a1 1 0 0 1-.916-.599l-1.85-3.49a68.14 68.14 0 0 0-.202-.003A2.014 2.014 0 0 1 0 9V7a2.02 2.02 0 0 1 1.992-2.013 74.663 74.663 0 0 0 2.483-.075c3.043-.154 6.148-.849 8.525-2.199V2.5zm1 0v11a.5.5 0 0 0 1 0v-11a.5.5 0 0 0-1 0zm-1 1.35c-2.344 1.205-5.209 1.842-8 2.033v4.233c.18.01.359.022.537.036 2.568.189 5.093.744 7.463 1.993V3.85zm-9 6.215v-4.13a95.09 95.09 0 0 1-1.992.052A1.02 1.02 0 0 0 1 7v2c0 .55.448 1.002 1.006 1.009A60.49 60.49 0 0 1 4 10.065zm-.657.975l1.609 3.037.01.024h.548l-.002-.014-.443-2.966a68.019 68.019 0 0 0-1.722-.082z"/>
                </svg><p>{% trans "Job ads" %}</p>
            </a>
        </h6>

        {% if request.user.is_authenticated %}
        <h6 class="text-dark py-1">
            <a class="text-dark" href="{% url 'shop:shop' request.user.id %}">
                 <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-shop" viewBox="0 0 16 16">
                  <path d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zM4 15h3v-5H4v5zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3zm3 0h-2v3h2v-3z"/>
                </svg><p>{% trans "My store" %}</p>
            </a>
        </h6>
        {% endif %}


    <h6 class="text-dark py-1">
        <a class="text-dark" href="{% url 'shop:setting' %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
          <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
          <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
        </svg>
        <p>{% trans "More" %}...</p>
        </a>
    </h6>




    </center>
</div>
{% endblock %}



{% block content %}

<div class="card col-12 col-xl-6 bg-light border-light offset-xl-2">


    <div class="d-flex justify-content-between bg-light my-3 text-secondary">

        <div class="d-none d-xl-block p-2 bg-light card ">
            <center>
               <a href="{% url 'announcements:job_ads' %}">
               <b>{{count_job_ads}}</b>
                <h6>{%trans "Job ads" %}</h6>
               </a>
            </center>
        </div>

        <div class="d-none d-xl-block p-2 bg-light card ">
            <center>
               <a class="text-dark"  href="{% url 'announcements:ads_user_city' user.id %}">
                   <b>{{count_user_city_ads}}</b>
                    <h1>{{user.shop.city}}</h1>
               </a>
            </center>
        </div>

        <div class="d-none d-xl-block p-2 bg-light card ">
            <center>
               <a href="{% url 'announcements:ads_user_country' user.id %}">
               <b></b>
                   {{count_user_country_ads}}
                <h6>{{user.shop.country}}</h6>
               </a>
            </center>
        </div>
    </div>



    <!-- smal devices -->
    <div class="d-block d-xl-none bg-light my-3 text-secondary">

        <div class="p-2 bg-light card ">
            <center>
               <a href="{% url 'announcements:job_ads' %}">
               <b>{{count_job_ads}}</b>
                <h4>{%trans "Job ads" %}</h4>
               </a>
            </center>
        </div>

        <div class="p-2 bg-light card ">
            <center>
               <a class="text-dark"  href="{% url 'announcements:ads_user_city' user.id %}">
                   <b>{{count_user_city_ads}}</b>
                    <h1>{{user.shop.city}}</h1>
               </a>
            </center>
        </div>

        <div class="p-2 bg-light card ">
            <center>
               <a href="{% url 'announcements:ads_user_country' user.id %}">
               <b></b>
                   {{count_user_country_ads}}
                <h4>{{user.shop.country}}</h4>
               </a>
            </center>
        </div>
    </div>



    {% for ads in job_ads %}

    <div class="card my-2">

        <div class="">

            <strong class="text-primary">
                {{ads.company_name}}


                {% if ads.company_city %}
                - {{ads.company_city}}
                {% endif %}


                {% if ads.company_country %}
                - {{ads.company_country}}
                {% endif %}
            </strong>

           <img src="{{ ads.company_logo.url }}" class="" style="width: 100%" height=400 />
        </div>

        <div class="">
            {{ads.company_city}} at



            {{ads.data}}
            {% if ads.company_email %}
            <h6>{{ads.company_email}}</h6>
            {% endif %}
            <p>{{ads.text}}</p>
        </div>
    </div>

    {% empty %}
    <center>
    <div class="card col-12 ">
    <center>
        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="black" class="bi bi-emoji-frown" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
          <path d="M4.285 12.433a.5.5 0 0 0 .683-.183A3.498 3.498 0 0 1 8 10.5c1.295 0 2.426.703 3.032 1.75a.5.5 0 0 0 .866-.5A4.498 4.498 0 0 0 8 9.5a4.5 4.5 0 0 0-3.898 2.25.5.5 0 0 0 .183.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"/>
        </svg>
    </center>
    <i>{% trans "UNABLE TO FIND JOB POSTING IN" %} <b>{{user.shop.city|upper}}</b></i>
    </div>
    </center>


    {% endfor %}

    <h4 class="pagination">
        <span class="col-12 badge badge-primary ">
            {% if job_ads.has_other_pages %}
                {% if job_ads.has_previous %}
            <a href="?page={{ job_ads.previous_page_number }}"><strong class="text-white"><- {% trans "previous" %}</strong></a>
            {% endif %}
            |
            {% if job_ads.has_next %}
            <a class="text-white" href="?page={{ job_ads.next_page_number }}"><strong>{% trans "next" %} -></strong></a>
            {% endif %}
            {% endif %}
        </span>
    </h4>



</div>

{% endblock %}

{% block right-column %}

{% endblock %}


